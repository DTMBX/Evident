{%- comment -%} PREMIUM DASHBOARD COMPONENT Displays key stats, activity feed,
and quick actions Usage: {% include premium-dashboard.html %} {%- endcomment -%}
{% assign total_cases = site.cases | where_exp: "case", "case.published !=
false" | size %} {% assign active_cases = site.cases | where: "status", "active"
| where_exp: "case", "case.published != false" | size %} {% assign total_opra =
site.opra | where_exp: "item", "item.slug != 'template'" | size %} {% assign
total_essays = site.essays | size %}

<section class="dashboard premium-dashboard" aria-label="Dashboard">
  <!-- Quick Stats Row -->
  <div class="dashboard__full">
    <div
      class="quick-stats"
      style="
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
        gap: 1rem;
      "
    >
      <div class="stat-card glass-card">
        <div class="stat-card__icon">ğŸ“</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ total_cases }}</div>
          <div class="stat-card__label">Total Cases</div>
        </div>
      </div>

      <div class="stat-card glass-card">
        <div class="stat-card__icon">âš–ï¸</div>
        <div class="stat-card__content">
          <div class="stat-card__value">
            {{ active_cases }}
            <span class="stat-card__trend stat-card__trend--up">â—</span>
          </div>
          <div class="stat-card__label">Active Litigation</div>
        </div>
      </div>

      <div class="stat-card glass-card">
        <div class="stat-card__icon">ğŸ“‹</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ total_opra }}</div>
          <div class="stat-card__label">OPRA Records</div>
        </div>
      </div>

      <div class="stat-card glass-card">
        <div class="stat-card__icon">ğŸ“</div>
        <div class="stat-card__content">
          <div class="stat-card__value">{{ total_essays }}</div>
          <div class="stat-card__label">Essays</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="dashboard__full">
    <h2
      style="
        font-size: 1.25rem;
        color: var(--premium-brass, #d4a574);
        margin-bottom: 1rem;
        font-weight: 600;
      "
    >
      Quick Actions
    </h2>
    <div class="quick-actions">
      <a href="/cases/" class="quick-action haptic-tap">
        <span class="quick-action__icon">ğŸ“</span>
        <span class="quick-action__label">Browse Cases</span>
      </a>
      <a href="/opra/" class="quick-action haptic-tap">
        <span class="quick-action__icon">ğŸ“‹</span>
        <span class="quick-action__label">OPRA Records</span>
      </a>
      <a href="/essays/" class="quick-action haptic-tap">
        <span class="quick-action__icon">ğŸ“</span>
        <span class="quick-action__label">Read Essays</span>
      </a>
      <a href="/stewardship/" class="quick-action haptic-tap">
        <span class="quick-action__icon">ğŸŒ±</span>
        <span class="quick-action__label">Stewardship</span>
      </a>
    </div>
  </div>

  <!-- Recent Activity & Featured Cases -->
  <div class="activity-feed glass-panel">
    <div class="activity-feed__header">
      <h3 class="activity-feed__title">Recent Cases</h3>
      <span class="activity-feed__badge">{{ active_cases }}</span>
    </div>
    <ul class="activity-feed__list">
      {% assign recent_cases = site.cases | where_exp: "case", "case.published
      != false" | sort: "filed_date" | reverse | limit: 5 %} {% for case in
      recent_cases %}
      <li class="activity-feed__item">
        <div class="activity-feed__icon activity-feed__icon--case">ğŸ“</div>
        <div class="activity-feed__content">
          <p class="activity-feed__text">
            <strong
              ><a
                href="{{ case.url | relative_url }}"
                style="color: inherit; text-decoration: none"
                >{{ case.short_title | default: case.title | truncate: 40 }}</a
              ></strong
            >
            <br />{{ case.venue | default: case.court | truncate: 30 }}
          </p>
          <time class="activity-feed__time"
            >{{ case.filed_date | date: "%b %d, %Y" | default: "Pending"
            }}</time
          >
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>

  <!-- Recent OPRA -->
  <div class="activity-feed glass-panel">
    <div class="activity-feed__header">
      <h3 class="activity-feed__title">Recent OPRA</h3>
      <span class="activity-feed__badge">{{ total_opra }}</span>
    </div>
    <ul class="activity-feed__list">
      {% assign recent_opra = site.opra | where_exp: "item", "item.slug !=
      'template'" | sort: "last_updated" | reverse | limit: 5 %} {% for record
      in recent_opra %}
      <li class="activity-feed__item">
        <div class="activity-feed__icon activity-feed__icon--opra">ğŸ“‹</div>
        <div class="activity-feed__content">
          <p class="activity-feed__text">
            <strong
              ><a
                href="{{ record.url | relative_url }}"
                style="color: inherit; text-decoration: none"
                >{{ record.title | truncate: 40 }}</a
              ></strong
            >
            <br />{{ record.authority_primary | truncate: 30 }}
          </p>
          <time class="activity-feed__time"
            >{{ record.last_updated | date: "%b %d, %Y" | default: "Pending"
            }}</time
          >
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</section>
