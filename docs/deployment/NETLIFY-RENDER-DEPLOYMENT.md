# Evident.info - Netlify + Render Deployment Guide

## ?? Architecture

Since you already paid for Netlify, we'll use a hybrid approach:

- **Netlify (Paid)** ? Frontend static pages, marketing site
- **Render (Free)** ? Flask backend API, database, AI processing

## ?? Step-by-Step Deployment

### Part 1: Deploy Backend to Render (Free)

#### 1. Push to GitHub

```powershell
git add .
git commit -m "Production deployment ready"
git push origin main
```

#### 2. Create Render Account

- Go to https://render.com
- Sign up with GitHub
- Authorize access to DTB396/Evident.info

#### 3. Create Web Service

1. Click **"New +"** ? **"Web Service"**
2. Connect **DTB396/Evident.info**
3. Settings:
   - **Name:** `Evident-backend`
   - **Environment:** `Python 3`
   - **Build Command:** `pip install -r requirements.txt`
   - **Start Command:** `gunicorn app:app -workers 2 -timeout 120`
   - **Plan:** `Free`

4. Add Environment Variables:

```
SECRET_KEY=<auto-generate>
FLASK_ENV=production
DATABASE_URL=<Render will provide>
CORS_ORIGINS=https://Evident.netlify.app,https://Evident.info
MAX_CONTENT_LENGTH=5368709120
```

5. Click **"Create Web Service"**

**Your backend will be at:** `https://Evident-backend.onrender.com`

--

### Part 2: Deploy Frontend to Netlify (Your Paid Account)

#### 1. Create Static Frontend Files

We need to extract your frontend:

```powershell
# Create static site directory
New-Item -ItemType Directory -Path "static_site" -Force

# Copy frontend files
Copy-Item index.html static_site/
Copy-Item -Recurse static static_site/
Copy-Item -Recurse templates static_site/
```

#### 2. Update Frontend to Point to Render Backend

The `netlify.toml` already redirects API calls to Render.

#### 3. Deploy to Netlify

**Option A: Netlify CLI (Easiest)**

```powershell
# Install Netlify CLI
npm install -g netlify-cli

# Login to Netlify
netlify login

# Deploy
netlify deploy -prod --dir=static_site
```

**Option B: Netlify Dashboard**

1. Go to https://app.netlify.com
2. Click **"Add new site"** ? **"Import existing project"**
3. Connect GitHub ? Select `DTB396/Evident.info`
4. Settings:
   - **Build command:** `echo "Static site"`
   - **Publish directory:** `static_site`
   - **Deploy!**

**Your frontend will be at:** `https://Evident.netlify.app`

--

## ?? How It Works

```
User visits: https://Evident.netlify.app
     ?
Netlify serves: HTML/CSS/JS (static files)
     ?
JavaScript makes API calls to: https://Evident-backend.onrender.com
     ?
Render processes: Login, uploads, AI analysis
     ?
Returns data to: Netlify frontend
     ?
User sees: Results!
```

--

## ?? Cost Breakdown

- **Netlify:** You already paid ?
- **Render Backend:** FREE (500 hrs/month)
- **Render Database:** FREE (PostgreSQL 256MB)

**Total additional cost: $0/month**

--

## ?? Quick Start (5 Minutes)

```powershell
# 1. Deploy backend to Render
# (Follow Part 1 above)

# 2. Deploy frontend to Netlify
netlify login
netlify deploy -prod --dir=.

# 3. Done! Your URLs:
# Frontend: https://Evident.netlify.app
# Backend: https://Evident-backend.onrender.com
```

--

## ?? Environment Variables

### Render (Backend):

```
SECRET_KEY=<auto-generated>
FLASK_ENV=production
CORS_ORIGINS=https://Evident.netlify.app
DATABASE_URL=postgresql://...
OPENAI_API_KEY=sk-... (optional)
ANTHROPIC_API_KEY=sk-ant-... (optional)
HUGGINGFACE_TOKEN=hf_... (optional)
```

### Netlify (Frontend):

```
REACT_APP_API_URL=https://Evident-backend.onrender.com
```

--

## ?? Custom Domain (Optional)

If you own `Evident.info`:

1. **Netlify:** Point `www.Evident.info` to Netlify
2. **Render:** Point `api.Evident.info` to Render backend

Then update CORS:

```
CORS_ORIGINS=https://www.Evident.info,https://api.Evident.info
```

--

## ?? Troubleshooting

### Frontend can't reach backend

- Check CORS settings in Render
- Verify `netlify.toml` redirects are correct

### Database errors

- Render free tier sleeps after 15 min inactivity
- First request takes 30 seconds to wake up

### File uploads not working

- Check Render disk space (limited on free tier)
- Consider using AWS S3 for uploads

--

## ?? Ready to Deploy?

**Option 1: Quick Deploy (Use What You Have)**

```powershell
# Just deploy everything to Netlify (static pages only)
netlify deploy -prod
```

**Option 2: Full Hybrid (Recommended)**

1. Backend to Render (follow Part 1)
2. Frontend to Netlify (follow Part 2)

**Which do you prefer?**
