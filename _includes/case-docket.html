{%- comment -%} CASE DOCKET SECTION Renders a modern, filterable docket
navigator for case pages. Loads docket entries from _data/docket/{case-slug}.yml
Usage: {% include case-docket.html %} Expects: - page.slug or page.case_slug to
match docket data file name - Docket entries with: id, date, type, title, file
(optional), notes (optional) Features: - Search filtering - Type-based filter
chips - Grid/List view toggle - Responsive design - Accessible keyboard
navigation {%- endcomment -%} {% assign slug = page.case_slug | default:
page.slug %} {% assign docket = site.data.docket[slug] %} {% assign docket_count
= docket | size %} {% if docket_count > 0 %} {%- comment -%} Calculate type
counts for filter chips {%- endcomment -%} {% assign orders = docket | where:
"type", "Order" | size %} {% assign motions = docket | where: "type", "Motion" |
size %} {% assign briefs = docket | where: "type", "Brief" | size %} {% assign
filings = docket | where: "type", "Filing" | size %} {% assign notices = docket
| where: "type", "Notice" | size %}

<section
  class="case-section case-docket"
  id="docket"
  aria-labelledby="docket-heading"
>
  <div class="docket-navigator" data-case="{{ slug }}">
    <!-- Section Header -->
    <header class="docket-section-header">
      <h2 id="docket-heading" class="docket-section-title">Case Docket</h2>
      <p class="docket-section-lead">
        Complete record of all court filings, orders, and documents for this
        case.
      </p>
    </header>

    <!-- Navigator Header with Search & Stats -->
    <div class="docket-nav-header">
      <div class="docket-search-wrapper">
        <div class="docket-search">
          <svg
            class="docket-search-icon"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
          >
            <circle cx="11" cy="11" r="8" />
            <line x1="21" y1="21" x2="16.65" y2="16.65" />
          </svg>
          <input
            type="search"
            class="docket-search-input"
            placeholder="Search docket entries..."
            aria-label="Search docket entries"
          />
        </div>

        <div class="docket-view-toggle" role="group" aria-label="View toggle">
          <button
            class="docket-view-btn active"
            data-view="grid"
            aria-pressed="true"
            title="Grid view"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <rect x="3" y="3" width="7" height="7" />
              <rect x="14" y="3" width="7" height="7" />
              <rect x="3" y="14" width="7" height="7" />
              <rect x="14" y="14" width="7" height="7" />
            </svg>
          </button>
          <button
            class="docket-view-btn"
            data-view="list"
            aria-pressed="false"
            title="List view"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <line x1="8" y1="6" x2="21" y2="6" />
              <line x1="8" y1="12" x2="21" y2="12" />
              <line x1="8" y1="18" x2="21" y2="18" />
              <line x1="3" y1="6" x2="3.01" y2="6" />
              <line x1="3" y1="12" x2="3.01" y2="12" />
              <line x1="3" y1="18" x2="3.01" y2="18" />
            </svg>
          </button>
        </div>
      </div>

      <div class="docket-stats">
        <div class="docket-stat">
          <span class="docket-stat-value" data-stat="filtered"
            >{{ docket_count }}</span
          >
          <span class="docket-stat-label"
            >of <span data-stat="total">{{ docket_count }}</span> entries</span
          >
        </div>
      </div>
    </div>

    <!-- Filter Chips -->
    <div class="docket-nav-filters">
      <span class="docket-filter-label">Filter by type:</span>

      <button class="docket-chip active" data-type="all" aria-pressed="true">
        All <span class="docket-chip-count">{{ docket_count }}</span>
      </button>

      {% if orders > 0 %}
      <button class="docket-chip" data-type="order" aria-pressed="false">
        Orders <span class="docket-chip-count">{{ orders }}</span>
      </button>
      {% endif %} {% if briefs > 0 %}
      <button class="docket-chip" data-type="brief" aria-pressed="false">
        Briefs <span class="docket-chip-count">{{ briefs }}</span>
      </button>
      {% endif %} {% if motions > 0 %}
      <button class="docket-chip" data-type="motion" aria-pressed="false">
        Motions <span class="docket-chip-count">{{ motions }}</span>
      </button>
      {% endif %} {% if filings > 0 %}
      <button class="docket-chip" data-type="filing" aria-pressed="false">
        Filings <span class="docket-chip-count">{{ filings }}</span>
      </button>
      {% endif %} {% if notices > 0 %}
      <button class="docket-chip" data-type="notice" aria-pressed="false">
        Notices <span class="docket-chip-count">{{ notices }}</span>
      </button>
      {% endif %}

      <div class="docket-filter-group" style="margin-left: auto">
        <label for="docket-sort" class="docket-filter-label">Sort:</label>
        <select id="docket-sort" class="docket-select" data-filter="sort">
          <option value="date-desc">Newest First</option>
          <option value="date-asc">Oldest First</option>
          <option value="type">By Type</option>
        </select>
      </div>

      <button class="docket-clear-filters" style="display: none">
        <svg
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
        >
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
        Clear
      </button>
    </div>

    <!-- Document Grid -->
    <div class="docket-nav-grid">
      {% for entry in docket %}
      <article
        class="docket-card"
        tabindex="0"
        data-type="{{ entry.type | downcase }}"
        data-date="{{ entry.date }}"
      >
        <span
          class="docket-card-type docket-card-type--{{ entry.type | downcase | default: 'document' }}"
        >
          {{ entry.type | default: "Document" }}
        </span>
        <time class="docket-card-date" datetime="{{ entry.date }}">
          {{ entry.date | date: "%B %-d, %Y" }}
        </time>
        <h3 class="docket-card-title">
          {{ entry.title | replace: "_", " " | replace: "-", " " | capitalize }}
        </h3>
        {% if entry.notes %}
        <p class="docket-card-notes">{{ entry.notes }}</p>
        {% endif %}
        <div class="docket-card-actions">
          {% if entry.file %}
          <a
            href="{{ entry.file | relative_url }}"
            class="docket-card-action"
            target="_blank"
            rel="noopener"
          >
            <svg
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
              />
              <polyline points="14 2 14 8 20 8" />
            </svg>
            View PDF
          </a>
          {% endif %}
        </div>
      </article>
      {% endfor %}
    </div>

    <!-- Embedded Data for JavaScript Enhancement -->
    <script type="application/json">
      {{ docket | jsonify }}
    </script>
  </div>
</section>

<!-- Load Docket Navigator Script -->
<script
  src="{{ '/assets/js/docket-navigator.js' | relative_url }}"
  defer
></script>

{% else %} {%- comment -%} Empty state when no docket data {%- endcomment -%}
<section class="case-section case-docket case-docket--empty" id="docket">
  <h2>Case Docket</h2>
  <div class="docket-empty">
    <svg
      class="docket-empty-icon"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="1.5"
    >
      <path
        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
      />
    </svg>
    <h3 class="docket-empty-title">No docket entries available</h3>
    <p class="docket-empty-text">
      Docket entries will appear here as documents are filed with the court.
    </p>
  </div>
</section>

{% endif %}
